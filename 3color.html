<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>rgbval controller</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>

  html { font-family: monospace; }

  body {
    margin: 24px;
    background: #000;   /* initial rgbval */
    color: #FFF;        /* inverse of #000 */
  }

  h1 { margin-bottom: 8px; }

  code {
    font-size: 2em;
    padding: 4px 8px;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(2, 70px);
    gap: 10px;
    margin-top: 20px;
  }

  button {
    font-size: 16px;
    padding: 6px;
    cursor: pointer;
  }

</style>
</head>

<body>

  <code id="rgbText">#000</code>

  <div class="grid">
    <button onclick="bump('r', -1)">R−</button>
    <button onclick="bump('r', +1)">R+</button>

    <button onclick="bump('g', -1)">G−</button>
    <button onclick="bump('g', +1)">G+</button>

    <button onclick="bump('b', -1)">B−</button>
    <button onclick="bump('b', +1)">B+</button>

    <button onclick="shift(-1)">S−</button>
    <button onclick="shift(+1)">S+</button>
  </div>

<script>
  let rgbval = "#000";

  function clamp(n) {
    n = n % 16;
    return n < 0 ? n + 16 : n;
  }

  function parse() {
    const h = rgbval.slice(1);
    return {
      r: parseInt(h[0], 16),
      g: parseInt(h[1], 16),
      b: parseInt(h[2], 16)
    };
  }

  function toHex({ r, g, b }) {
    return "#" +
      r.toString(16).toUpperCase() +
      g.toString(16).toUpperCase() +
      b.toString(16).toUpperCase();
  }

  function invert({ r, g, b }) {
    return toHex({
      r: 15 - r,
      g: 15 - g,
      b: 15 - b
    });
  }

  function render() {
    document.body.style.background = rgbval;
    document.body.style.color = invert(parse());
    document.getElementById("rgbText").textContent = rgbval;
    document.title = rgbval;
  }

  function bump(channel, delta) {
    const c = parse();
    c[channel] = clamp(c[channel] + delta);
    rgbval = toHex(c);
    render();
  }

  function shift(dir) {
    const c = parse();
    const delta = dir > 0 ? 1 : -1;

    c.r = Math.min(15, Math.max(0, c.r + delta));
    c.g = Math.min(15, Math.max(0, c.g + delta));
    c.b = Math.min(15, Math.max(0, c.b + delta));

    rgbval = toHex(c);
    render();
  }

  document.addEventListener("DOMContentLoaded", () => {
    render();
  });
</script>
</body>
</html>
